<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pingora - Network Speed Test</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4f46e5;
            --primary-dark: #4338ca;
            --secondary-color: #0ea5e9;
            --dark-bg: #0f172a;
            --card-bg: #1e293b;
            --text-light: #f8fafc;
            --text-muted: #94a3b8;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --border-radius: 12px;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--dark-bg);
            color: var(--text-light);
            min-height: 100vh;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px 0;
            margin-bottom: 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 24px;
            color: white;
        }

        .logo-text {
            font-size: 32px;
            font-weight: 700;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 30px;
        }

        nav a {
            color: var(--text-muted);
            text-decoration: none;
            font-weight: 500;
            font-size: 16px;
            transition: var(--transition);
        }

        nav a:hover, nav a.active {
            color: var(--primary-color);
        }

        /* Main Content */
        main {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 30px;
            margin-bottom: 40px;
        }

        /* Test Panel */
        .test-panel {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 40px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .test-header {
            margin-bottom: 40px;
            text-align: center;
        }

        .test-header h1 {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--text-light);
        }

        .test-header p {
            color: var(--text-muted);
            font-size: 18px;
        }

        .test-visualization {
            position: relative;
            height: 200px;
            margin-bottom: 40px;
            background-color: rgba(15, 23, 42, 0.5);
            border-radius: var(--border-radius);
            overflow: hidden;
        }

        .visualization-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(90deg, transparent 49.5%, rgba(255, 255, 255, 0.05) 49.5%, rgba(255, 255, 255, 0.05) 50.5%, transparent 50.5%),
                linear-gradient(0deg, transparent 49.5%, rgba(255, 255, 255, 0.05) 49.5%, rgba(255, 255, 255, 0.05) 50.5%, transparent 50.5%);
            background-size: 50px 50px;
        }

        .data-flow {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0.7;
        }

        .flow-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background-color: var(--primary-color);
            border-radius: 50%;
            animation: flowAnimation 3s linear infinite;
        }

        @keyframes flowAnimation {
            0% {
                transform: translateX(-20px) translateY(100px);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateX(calc(100vw - 50px)) translateY(100px);
                opacity: 0;
            }
        }

        /* Test Results */
        .test-results {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 40px;
        }

        .result-card {
            background-color: rgba(15, 23, 42, 0.5);
            border-radius: var(--border-radius);
            padding: 25px;
            text-align: center;
            transition: var(--transition);
        }

        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .result-card.active {
            background-color: rgba(79, 70, 229, 0.1);
            border: 1px solid rgba(79, 70, 229, 0.3);
        }

        .result-card h3 {
            font-size: 16px;
            color: var(--text-muted);
            margin-bottom: 15px;
            font-weight: 600;
        }

        .result-value {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .result-unit {
            font-size: 16px;
            color: var(--text-muted);
        }

        #download-speed .result-value {
            color: var(--primary-color);
        }

        #upload-speed .result-value {
            color: var(--secondary-color);
        }

        #ping-value .result-value {
            color: var(--success-color);
        }

        /* Test Controls */
        .test-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .btn {
            padding: 16px 32px;
            border: none;
            border-radius: var(--border-radius);
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(79, 70, 229, 0.3);
        }

        .btn-secondary {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-light);
        }

        .btn-secondary:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }

        /* Progress Bar */
        .test-progress {
            margin-top: 30px;
        }

        .progress-bar {
            height: 8px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            width: 0%;
            transition: width 0.5s ease;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: var(--text-muted);
        }

        /* Sidebar */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .info-card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .info-card h2 {
            font-size: 20px;
            margin-bottom: 20px;
            color: var(--text-light);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .info-card h2 i {
            color: var(--primary-color);
        }

        .server-list {
            list-style: none;
        }

        .server-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .server-item:last-child {
            border-bottom: none;
        }

        .server-info h4 {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .server-info p {
            font-size: 14px;
            color: var(--text-muted);
        }

        .server-status {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .status-online {
            background-color: var(--success-color);
            box-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
        }

        .status-offline {
            background-color: var(--danger-color);
        }

        .history-list {
            list-style: none;
        }

        .history-item {
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .history-date {
            font-size: 14px;
            color: var(--text-muted);
            margin-bottom: 5px;
        }

        .history-stats {
            display: flex;
            justify-content: space-between;
            font-size: 16px;
        }

        .stat-download {
            color: var(--primary-color);
        }

        .stat-upload {
            color: var(--secondary-color);
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 30px 0;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-muted);
            font-size: 14px;
        }

        footer a {
            color: var(--primary-color);
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            main {
                grid-template-columns: 1fr;
            }
            
            .test-results {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            header {
                flex-direction: column;
                gap: 20px;
            }
            
            nav ul {
                gap: 15px;
            }
            
            .test-controls {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }

        /* Animation for test running */
        @keyframes pulse {
            0% { opacity: 0.4; }
            50% { opacity: 1; }
            100% { opacity: 0.4; }
        }

        .testing {
            animation: pulse 1.5s infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">P</div>
                <div class="logo-text">Pingora</div>
            </div>
            <nav>
                <ul>
                    <li><a href="#" class="active">Speed Test</a></li>
                    <li><a href="#">Results</a></li>
                    <li><a href="#">Servers</a></li>
                    <li><a href="#">Settings</a></li>
                    <li><a href="#">Help</a></li>
                </ul>
            </nav>
        </header>

        <main>
            <div class="test-panel">
                <div class="test-header">
                    <h1>Network Speed Test</h1>
                    <p>Measure your download, upload, and ping in seconds</p>
                </div>

                <div class="test-visualization">
                    <div class="visualization-bg"></div>
                    <div class="data-flow" id="data-flow">
                        <!-- Data flow particles will be generated here -->
                    </div>
                </div>

                <div class="test-results">
                    <div class="result-card" id="ping-value">
                        <h3>PING</h3>
                        <div class="result-value">--</div>
                        <div class="result-unit">ms</div>
                    </div>
                    <div class="result-card active" id="download-speed">
                        <h3>DOWNLOAD</h3>
                        <div class="result-value">--</div>
                        <div class="result-unit">Mbps</div>
                    </div>
                    <div class="result-card" id="upload-speed">
                        <h3>UPLOAD</h3>
                        <div class="result-value">--</div>
                        <div class="result-unit">Mbps</div>
                    </div>
                </div>

                <div class="test-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <div class="progress-text">
                        <span id="progress-status">Ready to start test</span>
                        <span id="progress-percent">0%</span>
                    </div>
                </div>

                <div class="test-controls">
                    <button class="btn btn-primary" id="start-test">
                        <i>â–¶</i> Start Speed Test
                    </button>
                    <button class="btn btn-secondary" id="stop-test" disabled>
                        <i>â– </i> Stop Test
                    </button>
                </div>
            </div>

            <div class="sidebar">
                <div class="info-card">
                    <h2><i>ðŸ“¡</i> Test Servers</h2>
                    <ul class="server-list" id="server-list">
                        <li class="server-item">
                            <div class="server-info">
                                <h4>Pingora Primary</h4>
                                <p>New York, USA</p>
                            </div>
                            <div class="server-status status-online"></div>
                        </li>
                        <li class="server-item">
                            <div class="server-info">
                                <h4>Pingora Europe</h4>
                                <p>Frankfurt, Germany</p>
                            </div>
                            <div class="server-status status-online"></div>
                        </li>
                        <li class="server-item">
                            <div class="server-info">
                                <h4>Pingora Asia</h4>
                                <p>Singapore</p>
                            </div>
                            <div class="server-status status-online"></div>
                        </li>
                        <li class="server-item">
                            <div class="server-info">
                                <h4>Pingora Australia</h4>
                                <p>Sydney, Australia</p>
                            </div>
                            <div class="server-status status-online"></div>
                        </li>
                    </ul>
                </div>

                <div class="info-card">
                    <h2><i>ðŸ“Š</i> Recent Tests</h2>
                    <ul class="history-list" id="history-list">
                        <li class="history-item">
                            <div class="history-date">Today, 10:30 AM</div>
                            <div class="history-stats">
                                <span class="stat-download">124.5 Mbps</span>
                                <span class="stat-upload">38.2 Mbps</span>
                                <span>12 ms</span>
                            </div>
                        </li>
                        <li class="history-item">
                            <div class="history-date">Yesterday, 8:15 PM</div>
                            <div class="history-stats">
                                <span class="stat-download">98.7 Mbps</span>
                                <span class="stat-upload">31.5 Mbps</span>
                                <span>14 ms</span>
                            </div>
                        </li>
                        <li class="history-item">
                            <div class="history-date">Nov 12, 2:45 PM</div>
                            <div class="history-stats">
                                <span class="stat-download">156.2 Mbps</span>
                                <span class="stat-upload">42.8 Mbps</span>
                                <span>9 ms</span>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </main>

        <footer>
            <p>Pingora Speed Test v2.1 â€¢ Powered by OpenSpeedTest Technology â€¢ <a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a></p>
            <p>Â© 2023 Pingora Networks. All rights reserved.</p>
        </footer>
    </div>

    <script>
        // DOM Elements
        const startTestBtn = document.getElementById('start-test');
        const stopTestBtn = document.getElementById('stop-test');
        const downloadSpeedEl = document.querySelector('#download-speed .result-value');
        const uploadSpeedEl = document.querySelector('#upload-speed .result-value');
        const pingValueEl = document.querySelector('#ping-value .result-value');
        const progressFill = document.getElementById('progress-fill');
        const progressStatus = document.getElementById('progress-status');
        const progressPercent = document.getElementById('progress-percent');
        const dataFlowEl = document.getElementById('data-flow');
        const serverList = document.getElementById('server-list');
        const historyList = document.getElementById('history-list');

        // Test State
        let testInProgress = false;
        let testTimeout = null;
        let currentTestPhase = 0; // 0 = not started, 1 = ping, 2 = download, 3 = upload
        let dataFlowInterval = null;

        // Simulated test servers
        const testServers = [
            { id: 1, name: "Pingora Primary", location: "New York, USA", status: "online", ping: 12 },
            { id: 2, name: "Pingora Europe", location: "Frankfurt, Germany", status: "online", ping: 28 },
            { id: 3, name: "Pingora Asia", location: "Singapore", status: "online", ping: 180 },
            { id: 4, name: "Pingora Australia", location: "Sydney, Australia", status: "online", ping: 220 }
        ];

        // Test history (simulated)
        let testHistory = [
            { date: "Today, 10:30 AM", download: 124.5, upload: 38.2, ping: 12 },
            { date: "Yesterday, 8:15 PM", download: 98.7, upload: 31.5, ping: 14 },
            { date: "Nov 12, 2:45 PM", download: 156.2, upload: 42.8, ping: 9 }
        ];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Create data flow animation
            createDataFlow();
            
            // Populate server list
            updateServerList();
            
            // Populate history list
            updateHistoryList();
            
            // Set up event listeners
            startTestBtn.addEventListener('click', startSpeedTest);
            stopTestBtn.addEventListener('click', stopSpeedTest);
        });

        // Create animated data flow particles
        function createDataFlow() {
            dataFlowEl.innerHTML = '';
            
            for (let i = 0; i < 40; i++) {
                const particle = document.createElement('div');
                particle.className = 'flow-particle';
                
                // Random position and animation delay
                const startY = Math.random() * 180 + 10;
                const delay = Math.random() * 5;
                
                particle.style.top = `${startY}px`;
                particle.style.animationDelay = `${delay}s`;
                
                // Random size variation
                const size = Math.random() * 3 + 2;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                
                // Random color variation
                const hue = Math.random() * 20 + 230; // Blue-purple range
                particle.style.backgroundColor = `hsl(${hue}, 80%, 65%)`;
                
                dataFlowEl.appendChild(particle);
            }
        }

        // Update server list display
        function updateServerList() {
            serverList.innerHTML = '';
            
            testServers.forEach(server => {
                const serverItem = document.createElement('li');
                serverItem.className = 'server-item';
                
                serverItem.innerHTML = `
                    <div class="server-info">
                        <h4>${server.name}</h4>
                        <p>${server.location}</p>
                    </div>
                    <div class="server-status status-${server.status}"></div>
                `;
                
                serverList.appendChild(serverItem);
            });
        }

        // Update history list display
        function updateHistoryList() {
            historyList.innerHTML = '';
            
            testHistory.forEach(test => {
                const historyItem = document.createElement('li');
                historyItem.className = 'history-item';
                
                historyItem.innerHTML = `
                    <div class="history-date">${test.date}</div>
                    <div class="history-stats">
                        <span class="stat-download">${test.download.toFixed(1)} Mbps</span>
                        <span class="stat-upload">${test.upload.toFixed(1)} Mbps</span>
                        <span>${test.ping} ms</span>
                    </div>
                `;
                
                historyList.appendChild(historyItem);
            });
        }

        // Start the speed test
        function startSpeedTest() {
            if (testInProgress) return;
            
            testInProgress = true;
            currentTestPhase = 1;
            
            // Update UI
            startTestBtn.disabled = true;
            stopTestBtn.disabled = false;
            
            // Reset values
            downloadSpeedEl.textContent = '--';
            uploadSpeedEl.textContent = '--';
            pingValueEl.textContent = '--';
            
            // Reset progress
            progressFill.style.width = '0%';
            progressPercent.textContent = '0%';
            progressStatus.textContent = 'Testing ping...';
            
            // Start test sequence
            startTestSequence();
            
            // Start data flow animation
            dataFlowInterval = setInterval(() => {
                createDataFlow();
            }, 3000);
        }

        // Stop the speed test
        function stopSpeedTest() {
            if (!testInProgress) return;
            
            testInProgress = false;
            currentTestPhase = 0;
            
            // Update UI
            startTestBtn.disabled = false;
            stopTestBtn.disabled = true;
            progressStatus.textContent = 'Test stopped';
            
            // Clear timeouts
            clearTimeout(testTimeout);
            clearInterval(dataFlowInterval);
            
            // Reset active card
            document.querySelectorAll('.result-card').forEach(card => {
                card.classList.remove('active');
            });
            
            // Add current test to history if completed
            if (parseInt(progressPercent.textContent) >= 90) {
                const now = new Date();
                const options = { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' };
                const dateStr = now.toLocaleDateString('en-US', options);
                
                testHistory.unshift({
                    date: dateStr,
                    download: parseFloat(downloadSpeedEl.textContent) || 0,
                    upload: parseFloat(uploadSpeedEl.textContent) || 0,
                    ping: parseInt(pingValueEl.textContent) || 0
                });
                
                // Keep only last 5 tests
                if (testHistory.length > 5) {
                    testHistory.pop();
                }
                
                updateHistoryList();
            }
        }

        // Start the test sequence
        function startTestSequence() {
            if (!testInProgress) return;
            
            switch (currentTestPhase) {
                case 1: // Ping test
                    testPing();
                    break;
                case 2: // Download test
                    testDownload();
                    break;
                case 3: // Upload test
                    testUpload();
                    break;
                case 4: // Complete
                    completeTest();
                    break;
            }
        }

        // Simulate ping test
        function testPing() {
            // Highlight ping card
            document.querySelectorAll('.result-card').forEach(card => {
                card.classList.remove('active');
            });
            document.getElementById('ping-value').classList.add('active');
            
            // Simulate finding best server
            let progress = 0;
            const interval = setInterval(() => {
                if (!testInProgress) {
                    clearInterval(interval);
                    return;
                }
                
                progress += 5;
                progressFill.style.width = `${progress}%`;
                progressPercent.textContent = `${progress}%`;
                
                if (progress >= 20) {
                    clearInterval(interval);
                    
                    // Set ping result
                    const bestServer = testServers.reduce((prev, curr) => 
                        prev.ping < curr.ping ? prev : curr
                    );
                    
                    pingValueEl.textContent = bestServer.ping;
                    progressFill.style.width = '20%';
                    progressPercent.textContent = '20%';
                    progressStatus.textContent = 'Testing download speed...';
                    
                    // Move to next phase
                    currentTestPhase = 2;
                    testTimeout = setTimeout(startTestSequence, 1000);
                }
            }, 100);
        }

        // Simulate download test
        function testDownload() {
            // Highlight download card
            document.querySelectorAll('.result-card').forEach(card => {
                card.classList.remove('active');
            });
            document.getElementById('download-speed').classList.add('active');
            
            // Simulate download test with random speed
            let progress = 20;
            let speed = 0;
            const targetSpeed = Math.random() * 300 + 50; // Random between 50-350 Mbps
            
            const interval = setInterval(() => {
                if (!testInProgress) {
                    clearInterval(interval);
                    return;
                }
                
                progress += 1.5;
                speed += targetSpeed / 40;
                
                if (progress > 60) {
                    progress = 60;
                    speed = targetSpeed;
                }
                
                progressFill.style.width = `${progress}%`;
                progressPercent.textContent = `${Math.round(progress)}%`;
                downloadSpeedEl.textContent = speed.toFixed(1);
                
                if (progress >= 60) {
                    clearInterval(interval);
                    
                    // Set final download speed
                    downloadSpeedEl.textContent = targetSpeed.toFixed(1);
                    progressFill.style.width = '60%';
                    progressPercent.textContent = '60%';
                    progressStatus.textContent = 'Testing upload speed...';
                    
                    // Move to next phase
                    currentTestPhase = 3;
                    testTimeout = setTimeout(startTestSequence, 1000);
                }
            }, 100);
        }

        // Simulate upload test
        function testUpload() {
            // Highlight upload card
            document.querySelectorAll('.result-card').forEach(card => {
                card.classList.remove('active');
            });
            document.getElementById('upload-speed').classList.add('active');
            
            // Simulate upload test with random speed
            let progress = 60;
            let speed = 0;
            const targetSpeed = Math.random() * 100 + 10; // Random between 10-110 Mbps
            
            const interval = setInterval(() => {
                if (!testInProgress) {
                    clearInterval(interval);
                    return;
                }
                
                progress += 1;
                speed += targetSpeed / 40;
                
                if (progress > 100) {
                    progress = 100;
                    speed = targetSpeed;
                }
                
                progressFill.style.width = `${progress}%`;
                progressPercent.textContent = `${Math.round(progress)}%`;
                uploadSpeedEl.textContent = speed.toFixed(1);
                
                if (progress >= 100) {
                    clearInterval(interval);
                    
                    // Set final upload speed
                    uploadSpeedEl.textContent = targetSpeed.toFixed(1);
                    progressFill.style.width = '100%';
                    progressPercent.textContent = '100%';
                    
                    // Move to completion
                    currentTestPhase = 4;
                    testTimeout = setTimeout(startTestSequence, 1000);
                }
            }, 100);
        }

        // Complete the test
        function completeTest() {
            if (!testInProgress) return;
            
            progressStatus.textContent = 'Test complete!';
            
            // Update UI
            startTestBtn.disabled = false;
            stopTestBtn.disabled = true;
            
            // Clear intervals
            clearInterval(dataFlowInterval);
            
            // Add to history
            const now = new Date();
            const options = { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' };
            const dateStr = now.toLocaleDateString('en-US', options);
            
            testHistory.unshift({
                date: dateStr,
                download: parseFloat(downloadSpeedEl.textContent),
                upload: parseFloat(uploadSpeedEl.textContent),
                ping: parseInt(pingValueEl.textContent)
            });
            
            // Keep only last 5 tests
            if (testHistory.length > 5) {
                testHistory.pop();
            }
            
            updateHistoryList();
            
            // Reset test state
            testInProgress = false;
            currentTestPhase = 0;
        }

        // Simulate server status changes
        setInterval(() => {
            // Randomly change a server status (10% chance)
            if (Math.random() < 0.1) {
                const randomIndex = Math.floor(Math.random() * testServers.length);
                testServers[randomIndex].status = testServers[randomIndex].status === 'online' ? 'offline' : 'online';
                updateServerList();
            }
        }, 10000);
    </script>
</body>
</html>
